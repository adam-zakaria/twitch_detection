# Current
So twitch_streams needs to be deleted from s3, local and gpu (reused)
It does get deleted off local..but from s3..? No


# Last run
Downloading: kuhlect/18831fe90cc041eb8a04f26da59aeb49.mp4
Downloading: mikwen/1feb94225a0b45328914e83668e8bc9e.mp4
Traceback (most recent call last):
  File "/home/ubuntu/Code/twitch_detection/test/production/gpu_process.py", line 215, in <module>
    s3.download_folder('s3://cliptu/twitch_streams', 'twitch_streams')
    â”” <module 'cliptu.s3' from '/home/ubuntu/Code/cliptu/backend/cliptu/cliptu/s3.py'>
  File "/home/ubuntu/Code/cliptu/backend/cliptu/cliptu/s3.py", line 322, in download_folder
    s3_client.download_file(bucket_name, obj['Key'], local_file_path)
    â”‚                       â”‚            â”‚           â”” 'twitch_streams/mikwen/1feb94225a0b45328914e83668e8bc9e.mp4'
    â”‚                       â”‚            â”” {'Key': 'twitch_streams/mikwen/1feb94225a0b45328914e83668e8bc9e.mp4', 'LastModified': datetime.datetime(2025, 3, 3, 5, 49, 8, tz...
    â”‚                       â”” 'cliptu'
    â”” <botocore.client.S3 object at 0x7a87bb92a410>
  File "/home/ubuntu/.pyenv/versions/3.11.9/lib/python3.11/site-packages/boto3/s3/inject.py", line 192, in download_file
    return transfer.download_file(
  File "/home/ubuntu/.pyenv/versions/3.11.9/lib/python3.11/site-packages/boto3/s3/transfer.py", line 406, in download_file
    future.result()
    â”” <s3transfer.futures.TransferFuture object at 0x7a87bb0bd050>
  File "/home/ubuntu/.pyenv/versions/3.11.9/lib/python3.11/site-packages/s3transfer/futures.py", line 103, in result
    return self._coordinator.result()
           â”” <s3transfer.futures.TransferFuture object at 0x7a87bb0bd050>
  File "/home/ubuntu/.pyenv/versions/3.11.9/lib/python3.11/site-packages/s3transfer/futures.py", line 266, in result
    raise self._exception
          â”” TransferCoordinator(transfer_id=0)
  File "/home/ubuntu/.pyenv/versions/3.11.9/lib/python3.11/site-packages/s3transfer/tasks.py", line 139, in __call__
    return self._execute_main(kwargs)
           â”‚                  â”” {'fileobj': <s3transfer.utils.DeferredOpenFile object at 0x7a87baef0690>, 'data': b'm\x9fBLiF\xdd\xb1\xf2\xf62\x1b\xb6\xc1q\x90\...
           â”” IOWriteTask(transfer_id=0, {'offset': 969932800})
  File "/home/ubuntu/.pyenv/versions/3.11.9/lib/python3.11/site-packages/s3transfer/tasks.py", line 162, in _execute_main
    return_value = self._main(**kwargs)
                   â”‚            â”” {'fileobj': <s3transfer.utils.DeferredOpenFile object at 0x7a87baef0690>, 'data': b'm\x9fBLiF\xdd\xb1\xf2\xf62\x1b\xb6\xc1q\x90\...
                   â”” IOWriteTask(transfer_id=0, {'offset': 969932800})
  File "/home/ubuntu/.pyenv/versions/3.11.9/lib/python3.11/site-packages/s3transfer/download.py", line 643, in _main
    fileobj.write(data)
    â”‚             â”” b'm\x9fBLiF\xdd\xb1\xf2\xf62\x1b\xb6\xc1q\x90\x1d\xb9\x12\x93;lB\xf1\xd6\xfb\xbc\x8b\x12\xa9\xae\xfe\xb3\x08\xa2\xff\x13%W\xe1\x...
    â”” <s3transfer.utils.DeferredOpenFile object at 0x7a87baef0690>
  File "/home/ubuntu/.pyenv/versions/3.11.9/lib/python3.11/site-packages/s3transfer/utils.py", line 384, in write
    self._fileobj.write(data)
    â”‚                   â”” b'm\x9fBLiF\xdd\xb1\xf2\xf62\x1b\xb6\xc1q\x90\x1d\xb9\x12\x93;lB\xf1\xd6\xfb\xbc\x8b\x12\xa9\xae\xfe\xb3\x08\xa2\xff\x13%W\xe1\x...
    â”” <s3transfer.utils.DeferredOpenFile object at 0x7a87baef0690>
OSError: [Errno 28] No space left on device
ðŸ›‘ Shutting down instance...
âœ… Instance has been powered down.

ðŸŽ¯ All Done!
Removed twitch_streams folder.
Starting Twitch stream downloads
Downloading frosty's stream to twitch_streams/frosty...
Downloading renegade's stream to twitch_streams/renegade...
Downloading formal's stream to twitch_streams/formal...
Downloading Luciid_TW's stream to twitch_streams/Luciid_TW...
Downloading itzthelastshot's stream to twitch_streams/itzthelastshot...
Downloading SpartanTheDogg's stream to twitch_streams/SpartanTheDogg...
Downloading SnakeBite's stream to twitch_streams/SnakeBite...
Downloading aPG's stream to twitch_streams/aPG...
Downloading Bound's stream to twitch_streams/Bound...
Downloading kuhlect's stream to twitch_streams/kuhlect...
Downloading druk84's stream to twitch_streams/druk84...
Downloading pzzznguin's stream to twitch_streams/pzzznguin...
Downloading cykul's stream to twitch_streams/cykul...
Downloading Tripppey's stream to twitch_streams/Tripppey...
Downloading royal2's stream to twitch_streams/royal2...
Downloading bubudubu's stream to twitch_streams/bubudubu...
Downloading mikwen's stream to twitch_streams/mikwen...
Downloading Ogre2's stream to twitch_streams/Ogre2...
Downloading HuNteR_Jjx's stream to twitch_streams/HuNteR_Jjx...
Downloading Alleesi's stream to twitch_streams/Alleesi...
Downloading Cruvu's stream to twitch_streams/Cruvu...
Downloading gunplexion's stream to twitch_streams/gunplexion...
Subprocesses are in group with leader PID: 85013
To kill all download subprocesses (without killing the parent), run:
kill -2 -85013; sleep 2; kill -9 -85013

